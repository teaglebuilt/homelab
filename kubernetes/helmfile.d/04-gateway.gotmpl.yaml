---
bases:
  - ../defaults.yaml

releases:
  - name: kgateway-crds
    namespace: kube-system
    chart: oci://cr.kgateway.dev/kgateway-dev/charts/kgateway-crds
    version: v2.0.1
    installed: true

  - name: kgateway
    namespace: kube-system
    chart: oci://cr.kgateway.dev/kgateway-dev/charts/kgateway
    version: v2.0.1
    installed: true
    needs:
      - kube-system/kgateway-crds
    values:
      - gateway:
          aiExtension:
            enabled: true
          inferenceExtension:
            enabled: true

  - name: homelab-gateway
    chart: ../charts/homelab-gateway
    namespace: kube-system
    needs:
      - kube-system/kgateway
